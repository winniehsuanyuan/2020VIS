!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return t}function n(t){return d3.max(t.nodes().map(function(t){return t.getComputedTextLength()}))}function r(t){return function(e){return e.length>t?e.slice(0,t-1)+"â€¦":e}}function a(t,a){function o(o){var f=a.domain(),p=m(e),h=d3.scaleOrdinal(d),x=d3.scaleOrdinal(d.reverse()),v=r(s),y=o.selectAll(".row").data(f,a).order(),w=y.enter().append("g").attr("class","row"),b=y.exit(),A=y.select("text");y=y.merge(w).attr("transform",function(t){return"translate(0,"+a(t)+")"}),b.remove(),w.append("rect").attr("y",.5).attr("width",l).attr("height",a.bandwidth()).attr("stroke",c).attr("stroke-width",.75).attr("fill",h),w.append("path").attr("stroke",x),A=A.merge(w.append("text").attr("y",a.bandwidth()/2).attr("dy","0.32em").on("mouseover",function(t){d3.select(this).text()!=t&&p.show(t)}).on("mouseout",p.hide)).text(v);var k=n(A)+2*u;k=t===g?l-k:k,i=t===g?[0,k]:[k,l],A.attr("text-anchor",t===g?"start":"end").attr("dx",t===g?u:-u).attr("x",k),o.append("path").attr("stroke",c).attr("d","M"+(k+.5)+",0.5V"+a.range()[1])}var i,d=["#FFF","#EEE"],u=5,c="#AAA",s=40,l=100;return o.draw_ticks=function(t,e){t.selectAll(".row").select("path").attr("d",e.map(function(t){return"M"+t+",1v"+(a.bandwidth()-1)}).join(""))},o.scale=function(t){return arguments.length?(a=t,o):a},o.width=function(t){return arguments.length?(l=t,o):l},o.colors=function(t){return arguments.length?(d=t,o):d},o.padding=function(t){return arguments.length?(u=t,o):u},o.range=function(t){return arguments.length?(i=t,o):i},o.trim=function(t){return arguments.length?(s=t,o):s},o}function o(t){return a(x,t)}function i(t){return a(g,t)}function d(t,e){if(moment)return moment.duration(e-t).humanize();var n=d3.timeSecond.count(t,e);return n<120?n+"s":n<7200?d3.timeMinute.count(t,e)+" min":n<172800?d3.timeHour.count(t,e)+" hours":n<5184e3?d3.timeDay.count(t,e)+" day(s)":n<63072e3?d3.timeMonth.count(t,e)+" month(s)":d3.timeYear.count(t,e)+" year(s)"}function u(){const t=Array.prototype.slice.call(arguments,0);return function(e){return t.reduce(function(t,e){return e(t)},e)}}function c(t){return function(e){return void 0===t?e:e[t]}}function s(t){var e=window.getComputedStyle(t,null).getPropertyValue("font-size");return parseFloat(e)}function l(t){return.299*t.r+.587*t.g+.114*t.b}function f(t){return l(t)>165}function p(t){return f(d3.color(t))?"black":"white"}function h(t,e){return"translate("+t+","+e+")"}var m=function(t){d3.select("head").selectAll("#tooltip").data([1]).enter().append("style").attr("id","tooltip").text("div.tooltip {        position: absolute;        text-align: center;        padding: 5px;        /* font: 12px sans-serif; */        background: white;        border: 1px solid #AAA;        border-radius: 2px;        pointer-events: none;      }");var e=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);return e.show=function(){e.transition().duration(100).style("opacity",.95),e.html(t.apply(null,arguments)).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")},e.hide=function(t){e.transition().duration(100).style("opacity",0)},e};const g=1,x=2;var v=["#4285f4","#db4437","#f4b400","#0f9d58","#ab47bc","#5e97f5","#e06055","#f5bf26","#33ab71","#b762c6","#00acc1","#ff855f","#9e9d24","#26b8ca","#ff7043"],y=function(){function t(t,e){var n=d3.select(this.parentNode),r=n.select("text"),a=n.select("rect"),o=b(t),i=r.node().getComputedTextLength();d3.active(this).tween("text",function(){return function(t){const e=a.attr("width")-2*f,n=e/i;r.text(n<1?o.substring(0,Math.floor(o.length*n)):o)}})}function e(e){const d=e.datum(),c=d3.map(d,w).keys(),v=new m(n),M=d3.scaleOrdinal(l);r=r||[d3.min(d,A),d3.max(d,k)],x&&(r=d3.extent(r.concat(new Date))),e.each(function(e){var n=a||this.getBoundingClientRect().width,d=c.length*(s(this)+4*f),l=d3.scaleBand().domain(c).range([0,d]),m=d3.scaleTime().domain(r),F=(g?i:o)(l).width(n),C=d3.select(this).append("svg").attr("class","timeline");C.attr("width",n),C.attr("height",d+20);var O=C.append("g"),_=O.append("g").attr("class","y axis").call(F),j=F.range();m.range([j[0]+f,j[1]-f]).clamp(!0);var B=d3.axisBottom(m),D=O.append("g").attr("class","x axis").attr("transform",h(0,d)).call(B);D.select(".domain").remove(),D.selectAll(".tick line").attr("stroke","#AAA");var E=m.ticks().map(m);_.call(F.draw_ticks,E);var L=O.selectAll("g.task").data(e);L.exit().remove();var P=L.enter().append("g").classed("task",!0);P.append("rect").attr("y",f).attr("height",l.bandwidth()-2*f).on("mouseover",v.show).on("mouseout",v.hide).style("fill",u(b,M)),P.append("text").attr("text-anchor","start").attr("fill",u(b,M,p)).attr("pointer-events","none").attr("dx",f).attr("y",l.bandwidth()/2).attr("dy","0.32em").text(b),L=L.merge(P),L.attr("transform",function(t){return h(j[0],l(w(t)))}).selectAll("rect").attr("width",0),L.transition().duration(y).attr("transform",function(t){return h(m(A(t)),l(w(t)))}).selectAll("rect").attr("width",function(t){return m(k(t))-m(A(t))}).on("start",t),x&&O.append("path").attr("stroke","red").attr("d","M"+m(new Date)+",0.5V"+d)})}function n(t,e){var n=u(d3.isoParse,d3.timeFormat("%Y-%m-%d"));return"<b>"+b(t)+'</b><hr style="margin: 2px 0 2px 0">'+n(A(t))+" - "+n(k(t))+"<br>"+d(A(t),k(t))}var r,a,l=v,f=5,g=!1,x=!1,y=0,w=c(0),b=c(1),A=c(2),k=c(3);return e.dates=function(t){return arguments.length?(r=t,e):r},e.width=function(t){return arguments.length?(a=t,e):a},e.today=function(t){return arguments.length?(x=t,e):x},e.colors=function(t){return arguments.length?(l=t,e):l},e.padding=function(t){return arguments.length?(f=t,e):f},e.reversed=function(t){return arguments.length?(g=t,e):g},e.duration=function(t){return arguments.length?(y=t,e):y},e};t.timeline=y,t.tooltip=m,t.timelineAxisLeft=o,t.timelineAxisRight=i,t.durationFormat=d,Object.defineProperty(t,"__esModule",{value:!0})});